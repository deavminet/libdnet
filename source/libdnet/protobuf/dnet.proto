syntax="proto3";

//DNETMessage
//
//This is the container for all message types
message DNETMessage
{
    enum MessageType
    {
        AUTH = 0;
        REGISTER = 1;
        CHANNEL_CMD = 2;
        LIST_CHANS = 3;
    }

    // Type of message
    MessageType type = 1;

    // Message contents
    bytes content = 2;
}

// ChannelMessage
//
// These represent channel commands
message ChannelCommand
{
    enum MessageType
    {
        CREATE = 0;
        DESTROY = 1;
        JOIN = 2;
        LEAVE = 3;
        SET_PROP = 4;
        GET_PROPS = 5;
        GET_MEMBERS = 6;
        GET_PROP = 7;
    }

    // The channel to which the command applies
    string name;

    // Additional data (dependent on command)
    bytes additionalData;
}

// Channel Property
//
// Represents a channel property which is a mapping
// of a key to a value (bytes) of which its interpretation
// is solely up to the user
message ChannelProperty
{
    // Property's name
    string name;
    
    // The property's data
    bytes data;
}

//UserMessage
//
//All authenticated messages
message UserMessage
{

}

message ProfileDetails
{
    string username;
    string server;
    repeated UserProperty = 2;
}

message UserProperty
{
    string propertyName;
    bytes propertyData;
}